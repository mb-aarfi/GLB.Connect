<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GLB.Connect</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="anonymous.css"> <!-- Link to the separated CSS file -->
</head>
<body>

    <!-- Navbar -->
    <div class="navbar">
        <a href="#" class="logo">
            <img src="Group 19413.png" alt="GLB.Connect Logo" class="logo-img">
        </a>
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="qnathreads.html">Q&A Threads</a></li>
            <li><a href="lost&found.html">Lost & Found</a></li>
            <li><a href="resources.html">Resource</a></li>
            <li><a href="anonymous.html">Anonymous Post</a></li>
            <li><a href="sessionsfirst.html">Sessions</a></li>
            <li><a href="alumnifirst.html">Alumni Network</a></li>
            <li><a href="aboutus.html">About</a></li>
        </ul>
    
        <div class="search-bar">
            <input type="text" class="search-input" placeholder="Search...">
        </div>
    </div>
    <!-- Navbar Ended -->

    <main class="main-content">
        <!-- Sidebar -->
        <aside class="sidebar">
            <img src="Group 19413.png" alt="GLB.Connect" class="sidebar-logo"> 
            <p>Seamless chat for seamless growth: fostering support in every conversation.</p>
        </aside>

        <!-- Chat Interface -->
        <div class="chat-container">
            <!-- Header -->
            <div class="chat-header">
                <div class="user-info">
                    <img id="user-image" src="https://via.placeholder.com/40" alt="User Icon">
                    <div class="username" id="user-name">Nisha </div>
                </div>
                <button class="be-anonymous-btn" onclick="toggleAnonymous()">Be Anonymous</button>
            </div>

            <!-- Messages -->
            <div class="chat-messages">
                <div class="message received">Hello! How can I help you?</div>
                <div class="message sent">I have a question about architecture designs.</div>
                <div class="message received">Sure! Feel free to ask.</div>
            </div>

            

            <!-- Input Section -->
<div class="chat-input">
    <textarea rows="1" placeholder="Write a message..."></textarea>
    <button class="send-icon">
        <i class="fa fa-paper-plane"></i>
      </button>
    <button class="emoji-btn" onclick="toggleEmojiPicker()">
        <i class="fas fa-smile"></i>
    </button>

    <!-- Microphone Icon Button -->
<button class="microphone-btn">
    <i class="fas fa-microphone"></i>
</button>

<!-- Audio Element to Playback Recording -->
<audio id="audio-playback" controls style="display: none;"></audio>

    <!-- File Upload Button (Paperclip) -->
<button class="file-upload-btn">
    <i class="fas fa-paperclip"></i>
</button>

<!-- Hidden File Input -->
<input type="file" id="file-input" style="display: none;" />


    <!-- Emoji Picker -->
    <div id="emoji-picker" class="emoji-picker">
        <!-- Add more emojis here -->
        <div class="emoji" onclick="insertEmoji('😀')">😀</div>
        <div class="emoji" onclick="insertEmoji('😁')">😁</div>
        <div class="emoji" onclick="insertEmoji('😂')">😂</div>
        <div class="emoji" onclick="insertEmoji('😃')">😃</div>
        <div class="emoji" onclick="insertEmoji('😄')">😄</div>
        <div class="emoji" onclick="insertEmoji('😅')">😅</div>
        <div class="emoji" onclick="insertEmoji('😆')">😆</div>
        <div class="emoji" onclick="insertEmoji('😇')">😇</div>
        <div class="emoji" onclick="insertEmoji('😈')">😈</div>
        <div class="emoji" onclick="insertEmoji('😉')">😉</div>
        <div class="emoji" onclick="insertEmoji('😊')">😊</div>
        <div class="emoji" onclick="insertEmoji('😍')">😍</div>
        <div class="emoji" onclick="insertEmoji('😘')">😘</div>
        <div class="emoji" onclick="insertEmoji('😜')">😜</div>
        <div class="emoji" onclick="insertEmoji('😝')">😝</div>
        <div class="emoji" onclick="insertEmoji('😛')">😛</div>
        <div class="emoji" onclick="insertEmoji('🤑')">🤑</div>
        <div class="emoji" onclick="insertEmoji('🤗')">🤗</div>
        <div class="emoji" onclick="insertEmoji('🤔')">🤔</div>
        <div class="emoji" onclick="insertEmoji('🤩')">🤩</div>
        <div class="emoji" onclick="insertEmoji('🥳')">🥳</div>
        <div class="emoji" onclick="insertEmoji('🥺')">🥺</div>
        <div class="emoji" onclick="insertEmoji('😎')">😎</div>
        <div class="emoji" onclick="insertEmoji('🤨')">🤨</div>
        <div class="emoji" onclick="insertEmoji('😜')">😜</div>
        <!-- You can keep adding more emojis in a similar fashion -->
    </div>    
</div>


        </div>
    </main>

    <!-- Footer -->
    <footer class="social-footer">
        <div class="social-icons">
            <a href="#" target="_blank"><img src="fb.png" alt="Facebook"></a>
            <a href="#" target="_blank"><img src="Group (1).png" alt="Twitter"></a>
            <a href="#" target="_blank"><img src="insta.png" alt="Instagram"></a>
            <a href="#" target="_blank"><img src="Linkedin.png" alt="LinkedIn"></a>
        </div>
    </footer>

    <!-- JavaScript for "Be Anonymous" Functionality -->
    <script>
        let isAnonymous = false;

        function toggleAnonymous() {
            const userName = document.getElementById('user-name');
            const userImage = document.getElementById('user-image');
            const button = document.querySelector('.be-anonymous-btn');

            if (!isAnonymous) {
                // Make anonymous
                userName.textContent = 'Anonymous';
                userImage.src = 'https://via.placeholder.com/40/cccccc/000000?text=A';
                button.textContent = 'Show Details';
                isAnonymous = true;
            } else {
                // Show details
                userName.textContent = 'Nisha';
                userImage.src = 'https://via.placeholder.com/40';
                button.textContent = 'Be Anonymous';
                isAnonymous = false;
            }
        }

// Toggle emoji picker visibility
function toggleEmojiPicker() {
    const emojiPicker = document.getElementById('emoji-picker');
    
    // Check if picker is currently visible
    if (emojiPicker.style.display === 'grid') {
        // Hide emoji picker with smooth transition
        emojiPicker.style.opacity = '0';
        emojiPicker.style.pointerEvents = 'none';
        setTimeout(() => {
            emojiPicker.style.display = 'none'; // Ensure it's hidden after transition
        }, 300); // Wait for transition time before setting display to none
    } else {
        // Show emoji picker with smooth transition
        emojiPicker.style.display = 'grid';
        setTimeout(() => {
            emojiPicker.style.opacity = '1';
            emojiPicker.style.pointerEvents = 'auto';
        }, 10); // Small delay before applying opacity and pointer events
    }
}

// Insert selected emoji into the textarea
function insertEmoji(emoji) {
    const textArea = document.querySelector('.chat-input textarea');
    textArea.value += emoji; // Insert the emoji at the current cursor position
    textArea.focus(); // Ensure focus stays on the textarea
    toggleEmojiPicker(); // Hide the emoji picker after selecting an emoji
}

// Select the paperclip button and the file input
const fileUploadButton = document.querySelector('.file-upload-btn');
const fileInput = document.getElementById('file-input');

// When the paperclip button is clicked, trigger the file input
fileUploadButton.addEventListener('click', () => {
    fileInput.click(); // Open the file selection dialog
});

// Optional: Add event listener to handle the file selection (e.g., display the selected file name)
fileInput.addEventListener('change', (event) => {
    const fileName = event.target.files[0]?.name;
    if (fileName) {
        console.log('Selected file:', fileName); // You can update this to show the file name in the UI
    }
});


// Select the microphone button and audio playback element
const microphoneButton = document.querySelector('.microphone-btn');
const audioPlayback = document.getElementById('audio-playback');

let mediaRecorder;
let audioChunks = [];

// Check for browser support for accessing microphone
if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
    // Event listener to start or stop recording
    microphoneButton.addEventListener('click', async () => {
        try {
            // Request microphone permission and start recording
            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });

            // Initialize MediaRecorder with the audio stream
            mediaRecorder = new MediaRecorder(stream);

            // When data is available (when the user stops recording)
            mediaRecorder.ondataavailable = (event) => {
                audioChunks.push(event.data);
            };

            // When the recording stops, create a blob URL to play back the audio
            mediaRecorder.onstop = () => {
                const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
                const audioUrl = URL.createObjectURL(audioBlob);
                audioPlayback.src = audioUrl;
                audioPlayback.style.display = 'block'; // Show the audio player
            };

            // Start recording
            if (mediaRecorder.state === 'inactive') {
                audioChunks = []; // Clear previous recording chunks
                mediaRecorder.start();
                microphoneButton.innerHTML = '<i class="fas fa-stop"></i>'; // Change icon to stop recording
            } else {
                // Stop recording if already recording
                mediaRecorder.stop();
                microphoneButton.innerHTML = '<i class="fas fa-microphone"></i>'; // Change icon back to microphone
            }
        } catch (err) {
            console.error('Error accessing microphone:', err);
        }
    });
} else {
    console.error('Your browser does not support audio recording.');
}

document.addEventListener('DOMContentLoaded', function() {
    const links = document.querySelectorAll('.nav-links a');
    const currentPage = window.location.pathname;

    links.forEach(link => {
        if (currentPage.includes(link.getAttribute('href'))) {
            link.classList.add('active');
        }
    });
});


    </script>
</body>
</html>
